"use strict";(self.webpackChunktdnq_github_io=self.webpackChunktdnq_github_io||[]).push([[6567,9637,511,8725],{9637:function(t,e,n){function i(t){var e;null===(e=t.querySelectorAll("canvas"))||void 0===e||e.forEach((function(t){return t.remove()}))}n.d(e,{e:function(){return i}})},6567:function(t,e,n){n.r(e),n.d(e,{default:function(){return w}});var i=n(3433),a=n(1413),r=n(5861),s=n(5671),o=n(3144),c=n(7757),h=n.n(c),u=n(3562),l=n(2518),d=n(9637),f=n(5165),p=n(8725),v=n(511),m=n(9737),w=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map;(0,s.Z)(this,t),this.addRows=function(t){var n=t.min,i=t.max,a=t.data,r=i-n,s=new u.Tme;e.helper.push(s);var o=new u.Tme;s.add(o);var c=new u.Tme;c.position.z=1,o.add(c);var h=new u.Tme;h.position.z=.5,c.add(h);var l=.5*Math.PI,d=-.135*Math.PI,f=[],p=new u.Ilk;a.forEach((function(e,i){e.forEach((function(e,a){if(void 0!==e){var v=(e-n)/r,m=new u.DvJ(1,1,1),w=u.M8C.lerp(.7,.3,v),g=u.M8C.lerp(.4,1,v);p.setHSL(w,1,g);var x=p.toArray().map((function(t){return 255*t})),y=m.getAttribute("position").count,b=new Uint8Array(3*y);b.forEach((function(t,e){b[e]=x[e%3]}));var C=new u.TlE(b,3,!0);m.setAttribute("color",C),s.rotation.y=u.M8C.degToRad(a+t.xllcorner)+l,o.rotation.x=u.M8C.degToRad(i+t.yllcorner)+d,c.scale.set(.005,.005,u.M8C.lerp(.01,.5,v)),h.updateWorldMatrix(!0,!1),m.applyMatrix4(h.matrixWorld),f.push(m)}}))}));var v=m.qf(f,!1),w=new u.xoR({vertexColors:!0});e.objects.dataBox=new u.Kj0(v,w)},this.leaveCallback=function(){var t;null===(t=e.gui)||void 0===t||t.destroy()},this.render=function(){e.renderer.render(e.scene,e.camera)},this.animate=function(t){e.render(t),window.addEventListener("mousedown",(function(t){t.preventDefault(),window.focus()})),window.addEventListener("keydown",(function(t){t.preventDefault()}))},this.animationId=n,this.scene=null,this.objects={},this.light=[],this.camera=null,this.renderer=null,this.helper=[],this.data={},this.textureLoader=new u.dpR,this.fileLoader=new u.hH6}return(0,o.Z)(t,[{key:"init",value:function(){var t=(0,r.Z)(h().mark((function t(e){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.canvasContainer=null===e||void 0===e?void 0:e.current,(0,d.e)(this.canvasContainer),this.initThree(),this.initCamera(),this.initLight(),t.next=7,this.initObjects();case 7:return t.next=9,this.fileLoader.loadAsync(v).then(this.parseData).then(this.addRows);case 9:this.initHelper(),this.initScene(),this.initControl(),requestAnimationFrame(this.animate);case 13:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"parseData",value:function(t){var e=Number.MAX_SAFE_INTEGER,n=Number.MIN_SAFE_INTEGER,i={data:[]};return t.split("\n").forEach((function(t){var a=t.trim().split(/\s+/);if(2===a.length)i[a[0]]=parseFloat(a[1]);else if(a.length>2){var r=a.map((function(t){var a=parseFloat(t);if(a!==i.NODATA_value)return n=Math.max(a,n),e=Math.min(a,e),a}));i.data.push(r)}})),(0,a.Z)((0,a.Z)({},i),{max:n,min:e})}},{key:"initControl",value:function(){this.control=new l.z(this.camera,this.renderer.domElement),this.control.addEventListener("change",this.render)}},{key:"initThree",value:function(){this.renderer=new u.CP7,this.renderer.setSize(this.canvasContainer.clientWidth,this.canvasContainer.clientHeight),this.canvasContainer.appendChild(this.renderer.domElement)}},{key:"initScene",value:function(){var t,e;this.scene=new u.xsS,(t=this.scene).add.apply(t,(0,i.Z)(Object.values(this.objects))),(e=this.scene).add.apply(e,(0,i.Z)(this.helper).concat((0,i.Z)(this.light)))}},{key:"initHelper",value:function(){"/"!==window.location.pathname&&(this.gui=new f.XS)}},{key:"initObjects",value:function(){var t=(0,r.Z)(h().mark((function t(){var e,n,i;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=new u.xo$(1,64,32),t.t0=u.xoR,t.next=4,this.textureLoader.loadAsync(p);case 4:t.t1=t.sent,t.t2={map:t.t1},n=new t.t0(t.t2),i=new u.Kj0(e,n),this.objects.sphere=i;case 9:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"initCamera",value:function(){this.camera=new u.cPb(60,this.canvasContainer.clientWidth/this.canvasContainer.clientHeight),this.camera.position.set(1.5,1.5,1.5),this.camera.lookAt(0,0,0)}},{key:"initLight",value:function(){var t=new u.Mig(16777215,.8);this.light.push(t)}}]),t}()},511:function(t,e,n){t.exports=n.p+"static/media/gpw_v4_basic_demographic_characteristics_rev10_a000_014mt_2010_cntm_1_deg.808a098392068f0273b2.asc"},8725:function(t,e,n){t.exports=n.p+"static/media/world.fba5551b3f8ea655e43b.jpg"}}]);