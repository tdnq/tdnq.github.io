"use strict";(globalThis.webpackChunktdnq_github_io=globalThis.webpackChunktdnq_github_io||[]).push([[6522,9637],{9637:(t,e,i)=>{function a(t){var e;null===(e=t.querySelectorAll("canvas"))||void 0===e||e.forEach((t=>t.remove()))}i.d(e,{e:()=>a})},6522:(t,e,i)=>{i.r(e),i.d(e,{default:()=>o});var a=i(3562),n=i(2518),s=i(9637);class o{constructor(t){this.leaveCallback=()=>{var t;null===(t=this.gui)||void 0===t||t.destroy()},this.render=t=>{const e=.05*(t*=.001);let i=this.data.curve.getPointAt(e%1),a=this.data.curve.getPointAt((e+.01)%1);this.objects.tank.position.set(i.x,this.objects.tank.position.y,i.y),this.objects.tank.lookAt(a.x,0,a.y),this.objects.tank.rotateX(-75*Math.PI/180),this.objects.tank.getObjectByName("wheels").children.forEach((e=>{e.rotateY(1*t)}));let n=this.objects.tank.getObjectByName("head");this.objects.target.getWorldPosition(this.data.targetPosition),n.lookAt(this.data.targetPosition),this.renderer.render(this.scene,this.camera)},this.animate=t=>{this.render(t),this.animationId.set("space",requestAnimationFrame(this.animate))},this.animationId=t,this.scene=null,this.objects={},this.light=[],this.camera=null,this.renderer=null,this.helper=[],this.data={targetPosition:new a.Pa4}}init(t){this.canvasContainer=null===t||void 0===t?void 0:t.current,(0,s.e)(this.canvasContainer),this.initThree(),this.initCamera(),this.initLight(),this.initObjects(),this.initHelper(),this.initScene(),this.initControl(),requestAnimationFrame(this.animate)}initControl(){this.control=new n.z(this.camera,this.renderer.domElement)}initThree(){this.renderer=new a.CP7,this.renderer.shadowMap.enabled=!0,this.renderer.setClearColor(11184810),this.renderer.setSize(this.canvasContainer.clientWidth,this.canvasContainer.clientHeight),this.canvasContainer.appendChild(this.renderer.domElement)}initScene(){this.scene=new a.xsS,this.scene.add(...Object.values(this.objects)),this.scene.add(...this.helper,...this.light)}initHelper(){new a.VLJ(2,10).material.depthTest=!1}initObjects(){{let t=new a._12(3,3),e=new a.xoR({color:16434323}),i=new a.Kj0(t,e);i.receiveShadow=!0,i.rotateX(-90*Math.PI/180),this.objects.ground=i}{let t=this.getTankObject();this.objects.tank=t}{const t=new a.gti([new a.Pa4(.5,.5),new a.Pa4(.5,-.5),new a.Pa4(-.5,-.5),new a.Pa4(-.5,.5),new a.Pa4(.5,.5)]),e=t.getPoints(50),i=(new a.u9r).setFromPoints(e),n=new a.nls({color:16711680}),s=new a.x12(i,n);s.rotateX(-90*Math.PI/180),this.objects.splineObject=s,this.data.curve=t}{let t=new a.Kj0(new a.xo$(.05),new a.xoR({color:255}));t.castShadow=!0,t.position.set(.6,.6,-.8),this.objects.target=t}}getTankObject(){let t=new a.ZAu,e=new a.Kj0(new a.DvJ(.3,.15,.6),new a.xoR({color:5138305})),i=new a.Kj0(new a.xo$(.1),new a.xoR({color:5138305})),n=new a.Kj0(new a.fHI(.02,.02,.4),new a.xoR({color:5138305}));n.rotateX(60*Math.PI/180),n.position.setY(.15),n.translateZ(.1);let s=new a.ZAu;s.name="head",s.add(n,i),s.position.setY(.1);let o=new a.ZAu;o.name="wheels";{let t=new a.fHI(.08,.08,.08);for(let e=0;e<6;e++){let i=new a.Kj0(t,new a.xoR({color:8947848})),n=0===Math.floor(e/3)?-.18:.18,s=e%3*.2;i.position.set(n,-.05,s+-.2),i.rotateZ(90*Math.PI/180),o.add(i)}}return t.add(e,s,o),t.castShadow=!0,t.position.setY(.15),t.scale.set(.6,.6,.6),t}initCamera(){this.camera=new a.cPb(60,this.canvasContainer.clientWidth/this.canvasContainer.clientHeight),this.camera.position.set(1,1,1),this.camera.lookAt(0,0,0)}initLight(){{let t=new a.Mig(16777215,.2);this.light.push(t)}{let t=new a.Ox3(16777215);this.light.push(t),t.position.set(0,1,0),t.castShadow=!0,t.shadow.mapSize.width=2048,t.shadow.mapSize.height=2048;const e=50;t.shadow.camera.left=-e,t.shadow.camera.right=e,t.shadow.camera.top=e,t.shadow.camera.bottom=-e,t.shadow.camera.near=1,t.shadow.camera.far=50,t.shadow.bias=.001}}}}}]);