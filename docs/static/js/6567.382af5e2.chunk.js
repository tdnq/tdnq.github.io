"use strict";(globalThis.webpackChunktdnq_github_io=globalThis.webpackChunktdnq_github_io||[]).push([[6567,9637,511,8725],{9637:(t,e,i)=>{function n(t){var e;null===(e=t.querySelectorAll("canvas"))||void 0===e||e.forEach((t=>t.remove()))}i.d(e,{e:()=>n})},6567:(t,e,i)=>{i.r(e),i.d(e,{default:()=>c});var n=i(3562),a=i(2518),s=i(9637),r=i(5165),o=i(8725),h=i(511),l=i(9737);class c{constructor(t=new Map){this.addRows=t=>{let{min:e,max:i,data:a}=t,s=i-e;const r=new n.Tme;this.helper.push(r);const o=new n.Tme;r.add(o);const h=new n.Tme;h.position.z=1,o.add(h);const c=new n.Tme;c.position.z=.5,h.add(c);let d=.5*Math.PI,p=-.135*Math.PI;const m=[],u=new n.Ilk;a.forEach(((i,a)=>{i.forEach(((i,l)=>{if(void 0===i)return;const w=(i-e)/s;let v=new n.DvJ(1,1,1);const b=n.M8C.lerp(.7,.3,w),g=n.M8C.lerp(.4,1,w);u.setHSL(b,1,g);const C=u.toArray().map((t=>255*t)),f=v.getAttribute("position").count,_=new Uint8Array(3*f);_.forEach(((t,e)=>{_[e]=C[e%3]}));const x=new n.TlE(_,3,!0);v.setAttribute("color",x),r.rotation.y=n.M8C.degToRad(l+t.xllcorner)+d,o.rotation.x=n.M8C.degToRad(a+t.yllcorner)+p,h.scale.set(.005,.005,n.M8C.lerp(.01,.5,w)),c.updateWorldMatrix(!0,!1),v.applyMatrix4(c.matrixWorld),m.push(v)}))}));const w=l.qf(m,!1),v=new n.xoR({vertexColors:!0});this.objects.dataBox=new n.Kj0(w,v)},this.leaveCallback=()=>{var t;null===(t=this.gui)||void 0===t||t.destroy()},this.render=()=>{this.renderer.render(this.scene,this.camera)},this.animate=t=>{this.render(t),window.addEventListener("mousedown",(t=>{t.preventDefault(),window.focus()})),window.addEventListener("keydown",(t=>{t.preventDefault()}))},this.animationId=t,this.scene=null,this.objects={},this.light=[],this.camera=null,this.renderer=null,this.helper=[],this.data={},this.textureLoader=new n.dpR,this.fileLoader=new n.hH6}async init(t){this.canvasContainer=null===t||void 0===t?void 0:t.current,(0,s.e)(this.canvasContainer),this.initThree(),this.initCamera(),this.initLight(),await this.initObjects(),await this.fileLoader.loadAsync(h).then(this.parseData).then(this.addRows),this.initHelper(),this.initScene(),this.initControl(),requestAnimationFrame(this.animate)}parseData(t){let e=Number.MAX_SAFE_INTEGER,i=Number.MIN_SAFE_INTEGER,n={data:[]};return t.split("\n").forEach((t=>{let a=t.trim().split(/\s+/);if(2===a.length)n[a[0]]=parseFloat(a[1]);else if(a.length>2){const t=a.map((t=>{let a=parseFloat(t);if(a!==n.NODATA_value)return i=Math.max(a,i),e=Math.min(a,e),a}));n.data.push(t)}})),{...n,max:i,min:e}}initControl(){this.control=new a.z(this.camera,this.renderer.domElement),this.control.addEventListener("change",this.render)}initThree(){this.renderer=new n.CP7,this.renderer.setSize(this.canvasContainer.clientWidth,this.canvasContainer.clientHeight),this.canvasContainer.appendChild(this.renderer.domElement)}initScene(){this.scene=new n.xsS,this.scene.add(...Object.values(this.objects)),this.scene.add(...this.helper,...this.light)}initHelper(){"/"!==window.location.pathname&&(this.gui=new r.XS)}async initObjects(){{let t=new n.xo$(1,64,32),e=new n.xoR({map:await this.textureLoader.loadAsync(o)}),i=new n.Kj0(t,e);this.objects.sphere=i}}initCamera(){this.camera=new n.cPb(60,this.canvasContainer.clientWidth/this.canvasContainer.clientHeight),this.camera.position.set(1.5,1.5,1.5),this.camera.lookAt(0,0,0)}initLight(){{let t=new n.Mig(16777215,.8);this.light.push(t)}}}},511:(t,e,i)=>{t.exports=i.p+"static/media/gpw_v4_basic_demographic_characteristics_rev10_a000_014mt_2010_cntm_1_deg.808a098392068f0273b2.asc"},8725:(t,e,i)=>{t.exports=i.p+"static/media/world.fba5551b3f8ea655e43b.jpg"}}]);