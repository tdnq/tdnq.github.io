(this["webpackJsonptdnq.github.io"]=this["webpackJsonptdnq.github.io"]||[]).push([[3],{169:function(t,e,n){"use strict";var r={vertex:[-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,1,-1,-1,1,1,-1,-1,1,-1],indices:[0,3,2,0,1,2,1,2,5,2,5,6,2,3,6,3,6,7,0,3,4,3,4,7,0,1,4,1,4,5,4,5,6,4,6,7],unit:3};e.a=r},170:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(t){var e,n,r;if(t&&"object"===typeof t&&t.hasOwnProperty("elements")){for(n=t.elements,r=new Float32Array(16),e=0;e<16;++e)r[e]=n[e];this.elements=r}else this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};r.prototype.setIdentity=function(){var t=this.elements;return t[0]=1,t[4]=0,t[8]=0,t[12]=0,t[1]=0,t[5]=1,t[9]=0,t[13]=0,t[2]=0,t[6]=0,t[10]=1,t[14]=0,t[3]=0,t[7]=0,t[11]=0,t[15]=1,this},r.prototype.set=function(t){var e,n,r;if((n=t.elements)!==(r=this.elements)){for(e=0;e<16;++e)r[e]=n[e];return this}},r.prototype.concat=function(t){var e,n,r,i,a,o,s,l;if(n=this.elements,r=this.elements,n===(i=t.elements))for(i=new Float32Array(16),e=0;e<16;++e)i[e]=n[e];for(e=0;e<4;e++)a=r[e],o=r[e+4],s=r[e+8],l=r[e+12],n[e]=a*i[0]+o*i[1]+s*i[2]+l*i[3],n[e+4]=a*i[4]+o*i[5]+s*i[6]+l*i[7],n[e+8]=a*i[8]+o*i[9]+s*i[10]+l*i[11],n[e+12]=a*i[12]+o*i[13]+s*i[14]+l*i[15];return this},r.prototype.multiply=r.prototype.concat,r.prototype.multiplyVector3=function(t){var e=this.elements,n=t.elements,r=new i,a=r.elements;return a[0]=n[0]*e[0]+n[1]*e[4]+n[2]*e[8]+e[12],a[1]=n[0]*e[1]+n[1]*e[5]+n[2]*e[9]+e[13],a[2]=n[0]*e[2]+n[1]*e[6]+n[2]*e[10]+e[14],r},r.prototype.multiplyVector4=function(t){var e=this.elements,n=t.elements,r=new a,i=r.elements;return i[0]=n[0]*e[0]+n[1]*e[4]+n[2]*e[8]+n[3]*e[12],i[1]=n[0]*e[1]+n[1]*e[5]+n[2]*e[9]+n[3]*e[13],i[2]=n[0]*e[2]+n[1]*e[6]+n[2]*e[10]+n[3]*e[14],i[3]=n[0]*e[3]+n[1]*e[7]+n[2]*e[11]+n[3]*e[15],r},r.prototype.transpose=function(){var t,e;return e=(t=this.elements)[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},r.prototype.setInverseOf=function(t){var e,n,r,i,a;if(n=t.elements,r=this.elements,(i=new Float32Array(16))[0]=n[5]*n[10]*n[15]-n[5]*n[11]*n[14]-n[9]*n[6]*n[15]+n[9]*n[7]*n[14]+n[13]*n[6]*n[11]-n[13]*n[7]*n[10],i[4]=-n[4]*n[10]*n[15]+n[4]*n[11]*n[14]+n[8]*n[6]*n[15]-n[8]*n[7]*n[14]-n[12]*n[6]*n[11]+n[12]*n[7]*n[10],i[8]=n[4]*n[9]*n[15]-n[4]*n[11]*n[13]-n[8]*n[5]*n[15]+n[8]*n[7]*n[13]+n[12]*n[5]*n[11]-n[12]*n[7]*n[9],i[12]=-n[4]*n[9]*n[14]+n[4]*n[10]*n[13]+n[8]*n[5]*n[14]-n[8]*n[6]*n[13]-n[12]*n[5]*n[10]+n[12]*n[6]*n[9],i[1]=-n[1]*n[10]*n[15]+n[1]*n[11]*n[14]+n[9]*n[2]*n[15]-n[9]*n[3]*n[14]-n[13]*n[2]*n[11]+n[13]*n[3]*n[10],i[5]=n[0]*n[10]*n[15]-n[0]*n[11]*n[14]-n[8]*n[2]*n[15]+n[8]*n[3]*n[14]+n[12]*n[2]*n[11]-n[12]*n[3]*n[10],i[9]=-n[0]*n[9]*n[15]+n[0]*n[11]*n[13]+n[8]*n[1]*n[15]-n[8]*n[3]*n[13]-n[12]*n[1]*n[11]+n[12]*n[3]*n[9],i[13]=n[0]*n[9]*n[14]-n[0]*n[10]*n[13]-n[8]*n[1]*n[14]+n[8]*n[2]*n[13]+n[12]*n[1]*n[10]-n[12]*n[2]*n[9],i[2]=n[1]*n[6]*n[15]-n[1]*n[7]*n[14]-n[5]*n[2]*n[15]+n[5]*n[3]*n[14]+n[13]*n[2]*n[7]-n[13]*n[3]*n[6],i[6]=-n[0]*n[6]*n[15]+n[0]*n[7]*n[14]+n[4]*n[2]*n[15]-n[4]*n[3]*n[14]-n[12]*n[2]*n[7]+n[12]*n[3]*n[6],i[10]=n[0]*n[5]*n[15]-n[0]*n[7]*n[13]-n[4]*n[1]*n[15]+n[4]*n[3]*n[13]+n[12]*n[1]*n[7]-n[12]*n[3]*n[5],i[14]=-n[0]*n[5]*n[14]+n[0]*n[6]*n[13]+n[4]*n[1]*n[14]-n[4]*n[2]*n[13]-n[12]*n[1]*n[6]+n[12]*n[2]*n[5],i[3]=-n[1]*n[6]*n[11]+n[1]*n[7]*n[10]+n[5]*n[2]*n[11]-n[5]*n[3]*n[10]-n[9]*n[2]*n[7]+n[9]*n[3]*n[6],i[7]=n[0]*n[6]*n[11]-n[0]*n[7]*n[10]-n[4]*n[2]*n[11]+n[4]*n[3]*n[10]+n[8]*n[2]*n[7]-n[8]*n[3]*n[6],i[11]=-n[0]*n[5]*n[11]+n[0]*n[7]*n[9]+n[4]*n[1]*n[11]-n[4]*n[3]*n[9]-n[8]*n[1]*n[7]+n[8]*n[3]*n[5],i[15]=n[0]*n[5]*n[10]-n[0]*n[6]*n[9]-n[4]*n[1]*n[10]+n[4]*n[2]*n[9]+n[8]*n[1]*n[6]-n[8]*n[2]*n[5],0===(a=n[0]*i[0]+n[1]*i[4]+n[2]*i[8]+n[3]*i[12]))return this;for(a=1/a,e=0;e<16;e++)r[e]=i[e]*a;return this},r.prototype.invert=function(){return this.setInverseOf(this)},r.prototype.setOrtho=function(t,e,n,r,i,a){var o,s,l,u;if(t===e||n===r||i===a)throw"null frustum";return s=1/(e-t),l=1/(r-n),u=1/(a-i),(o=this.elements)[0]=2*s,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=2*l,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=-2*u,o[11]=0,o[12]=-(e+t)*s,o[13]=-(r+n)*l,o[14]=-(a+i)*u,o[15]=1,this},r.prototype.ortho=function(t,e,n,i,a,o){return this.concat((new r).setOrtho(t,e,n,i,a,o))},r.prototype.setFrustum=function(t,e,n,r,i,a){var o,s,l,u;if(t===e||r===n||i===a)throw"null frustum";if(i<=0)throw"near <= 0";if(a<=0)throw"far <= 0";return s=1/(e-t),l=1/(r-n),u=1/(a-i),(o=this.elements)[0]=2*i*s,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=2*i*l,o[6]=0,o[7]=0,o[8]=(e+t)*s,o[9]=(r+n)*l,o[10]=-(a+i)*u,o[11]=-1,o[12]=0,o[13]=0,o[14]=-2*i*a*u,o[15]=0,this},r.prototype.frustum=function(t,e,n,i,a,o){return this.concat((new r).setFrustum(t,e,n,i,a,o))},r.prototype.setPerspective=function(t,e,n,r){var i,a,o,s;if(n===r||0===e)throw"null frustum";if(n<=0)throw"near <= 0";if(r<=0)throw"far <= 0";if(t=Math.PI*t/180/2,0===(o=Math.sin(t)))throw"null frustum";return a=1/(r-n),s=Math.cos(t)/o,(i=this.elements)[0]=s/e,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=s,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=-(r+n)*a,i[11]=-1,i[12]=0,i[13]=0,i[14]=-2*n*r*a,i[15]=0,this},r.prototype.perspective=function(t,e,n,i){return this.concat((new r).setPerspective(t,e,n,i))},r.prototype.setScale=function(t,e,n){var r=this.elements;return r[0]=t,r[4]=0,r[8]=0,r[12]=0,r[1]=0,r[5]=e,r[9]=0,r[13]=0,r[2]=0,r[6]=0,r[10]=n,r[14]=0,r[3]=0,r[7]=0,r[11]=0,r[15]=1,this},r.prototype.scale=function(t,e,n){var r=this.elements;return r[0]*=t,r[4]*=e,r[8]*=n,r[1]*=t,r[5]*=e,r[9]*=n,r[2]*=t,r[6]*=e,r[10]*=n,r[3]*=t,r[7]*=e,r[11]*=n,this},r.prototype.setTranslate=function(t,e,n){var r=this.elements;return r[0]=1,r[4]=0,r[8]=0,r[12]=t,r[1]=0,r[5]=1,r[9]=0,r[13]=e,r[2]=0,r[6]=0,r[10]=1,r[14]=n,r[3]=0,r[7]=0,r[11]=0,r[15]=1,this},r.prototype.translate=function(t,e,n){var r=this.elements;return r[12]+=r[0]*t+r[4]*e+r[8]*n,r[13]+=r[1]*t+r[5]*e+r[9]*n,r[14]+=r[2]*t+r[6]*e+r[10]*n,r[15]+=r[3]*t+r[7]*e+r[11]*n,this},r.prototype.setRotate=function(t,e,n,r){var i,a,o,s,l,u,c,h,f,p,m,v;return t=Math.PI*t/180,i=this.elements,a=Math.sin(t),o=Math.cos(t),0!==e&&0===n&&0===r?(e<0&&(a=-a),i[0]=1,i[4]=0,i[8]=0,i[12]=0,i[1]=0,i[5]=o,i[9]=-a,i[13]=0,i[2]=0,i[6]=a,i[10]=o,i[14]=0,i[3]=0,i[7]=0,i[11]=0,i[15]=1):0===e&&0!==n&&0===r?(n<0&&(a=-a),i[0]=o,i[4]=0,i[8]=a,i[12]=0,i[1]=0,i[5]=1,i[9]=0,i[13]=0,i[2]=-a,i[6]=0,i[10]=o,i[14]=0,i[3]=0,i[7]=0,i[11]=0,i[15]=1):0===e&&0===n&&0!==r?(r<0&&(a=-a),i[0]=o,i[4]=-a,i[8]=0,i[12]=0,i[1]=a,i[5]=o,i[9]=0,i[13]=0,i[2]=0,i[6]=0,i[10]=1,i[14]=0,i[3]=0,i[7]=0,i[11]=0,i[15]=1):(1!==(s=Math.sqrt(e*e+n*n+r*r))&&(e*=l=1/s,n*=l,r*=l),u=1-o,c=e*n,h=n*r,f=r*e,p=e*a,m=n*a,v=r*a,i[0]=e*e*u+o,i[1]=c*u+v,i[2]=f*u-m,i[3]=0,i[4]=c*u-v,i[5]=n*n*u+o,i[6]=h*u+p,i[7]=0,i[8]=f*u+m,i[9]=h*u-p,i[10]=r*r*u+o,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1),this},r.prototype.rotate=function(t,e,n,i){return this.concat((new r).setRotate(t,e,n,i))},r.prototype.setLookAt=function(t,e,n,r,i,a,o,s,l){var u,c,h,f,p,m,v,d,y,g,w,_;return c=r-t,h=i-e,f=a-n,m=(h*=p=1/Math.sqrt(c*c+h*h+f*f))*l-(f*=p)*s,v=f*o-(c*=p)*l,d=c*s-h*o,g=(v*=y=1/Math.sqrt(m*m+v*v+d*d))*f-(d*=y)*h,w=d*c-(m*=y)*f,_=m*h-v*c,(u=this.elements)[0]=m,u[1]=g,u[2]=-c,u[3]=0,u[4]=v,u[5]=w,u[6]=-h,u[7]=0,u[8]=d,u[9]=_,u[10]=-f,u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,this.translate(-t,-e,-n)},r.prototype.lookAt=function(t,e,n,i,a,o,s,l,u){return this.concat((new r).setLookAt(t,e,n,i,a,o,s,l,u))},r.prototype.dropShadow=function(t,e){var n=new r,i=n.elements,a=t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3];return i[0]=a-e[0]*t[0],i[1]=-e[1]*t[0],i[2]=-e[2]*t[0],i[3]=-e[3]*t[0],i[4]=-e[0]*t[1],i[5]=a-e[1]*t[1],i[6]=-e[2]*t[1],i[7]=-e[3]*t[1],i[8]=-e[0]*t[2],i[9]=-e[1]*t[2],i[10]=a-e[2]*t[2],i[11]=-e[3]*t[2],i[12]=-e[0]*t[3],i[13]=-e[1]*t[3],i[14]=-e[2]*t[3],i[15]=a-e[3]*t[3],this.concat(n)},r.prototype.dropShadowDirectionally=function(t,e,n,r,i,a,o,s,l){var u=r*t+i*e+a*n;return this.dropShadow([t,e,n,-u],[o,s,l,0])};var i=function(t){var e=new Float32Array(3);t&&"object"===typeof t&&(e[0]=t[0],e[1]=t[1],e[2]=t[2]),this.elements=e};i.prototype.normalize=function(){var t=this.elements,e=t[0],n=t[1],r=t[2],i=Math.sqrt(e*e+n*n+r*r);return i?1==i?this:(i=1/i,t[0]=e*i,t[1]=n*i,t[2]=r*i,this):(t[0]=0,t[1]=0,t[2]=0,this)};var a=function(t){var e=new Float32Array(4);t&&"object"===typeof t&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3]),this.elements=e}},171:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=[1,1,1,.1]},172:function(t,e,n){"use strict";n.r(e);var r=n(168),i=n(171),a=n(169),o={vshader:"\n            attribute vec4 a_position;\n            attribute vec4 a_color;\n            varying vec4 f_color;\n            uniform mat4 u_modelMatrix;\n            uniform vec4 u_eye;\n            uniform mat4 u_mvpMatrix; \n            varying float v_dist;\n            void main(){\n                gl_Position = u_mvpMatrix * a_position;\n                f_color = a_color;\n                v_dist = distance(u_modelMatrix * a_position, u_eye);\n            }\n        ",fshader:"\n            precision mediump float;\n            varying vec4 f_color;\n            varying float v_dist;\n            uniform vec4 u_fogColor;\n            uniform vec2 u_fogDist;\n            void main(){\n                float fogFactor = clamp((u_fogDist.y - v_dist) / (u_fogDist.y - u_fogDist.x), 0.0, 1.0);\n                vec4 color = mix(u_fogColor, f_color, fogFactor);\n                gl_FragColor = color;\n            }\n        "},s=n(170);function l(t){var e;this.canvasContainer=t.current,this.createCanvas(this.canvasContainer.clientWidth,this.canvasContainer.clientHeight).appendCanvas().getWebglContext(),(e=this.gl).clearColor.apply(e,Object(r.a)(i.a)),this.gl.enable(this.gl.DEPTH_TEST),this.initShader(o),u.call(this);var n=new s.a;n.setScale(10,10,10),this.fillUniformData(n.elements,"u_modelMatrix",4,"Matrix");var l=new Float32Array(this.getRandomArray(4)),h=new Float32Array([55,80]),f=new Float32Array([25,65,35,1]);this.fillUniformData(l,"u_fogColor",4),this.fillUniformData(h,"u_fogDist",2),this.fillUniformData(f,"u_eye",4);var p=new s.a;p.setPerspective(30,this.ele.width/this.ele.height,1,1e3),p.lookAt(f[0],f[1],f[2],0,2,0,0,1,0),p.multiply(n),this.fillUniformData(p.elements,"u_mvpMatrix",4,"Matrix"),this.gl.clear(this.gl.DEPTH_BUFFER_BIT|this.gl.COLOR_BUFFER_BIT),this.gl.drawElements(this.gl.TRIANGLES,a.a.indices.length,this.gl.UNSIGNED_BYTE,0),document.addEventListener("keydown",c.bind(this,h))}function u(){var t=new Float32Array(a.a.vertex),e=t.length/a.a.unit,n=new Uint8Array(a.a.indices),r=new Float32Array(this.getRandomArray(4*e));this.fillShaderAttribution(t,"a_position",a.a.unit),this.fillShaderAttribution(r,"a_color",4),this.fillElementsIndex(n)}function c(t,e){switch(e.keyCode){case 38:t[1]+=1;break;case 40:t[0]<t[1]&&(t[1]-=1)}this.fillUniformData(t,"u_fogDist",2),this.gl.clear(this.gl.DEPTH_BUFFER_BIT|this.gl.COLOR_BUFFER_BIT),this.gl.drawElements(this.gl.TRIANGLES,a.a.indices.length,this.gl.UNSIGNED_BYTE,0)}n.d(e,"default",(function(){return l}))},173:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return v}));var r=n(168),i=n(8),a=n(12),o=n(18),s=n(17),l=n(19),u=n(65),c=n(169),h=n(94),f=n(170),p=n(171),m=n(172),v=function(t){function e(){var t;Object(i.a)(this,e);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Object(o.a)(this,(t=Object(s.a)(e)).call.apply(t,[this].concat(r)))}return Object(l.a)(e,t),Object(a.a)(e,[{key:"rotateCubeUseMouse",value:function(t){var e;this.canvasContainer=t.current,this.createCanvas(this.canvasContainer.clientWidth,this.canvasContainer.clientHeight).appendCanvas().getWebglContext(),(e=this.gl).clearColor.apply(e,Object(r.a)(p.a)),this.gl.enable(this.gl.DEPTH_TEST),this.initShader(h.a),this.rotateCubeUseMouse_model();var n=new f.a;n.setPerspective(30,this.ele.width/this.ele.height,1,100),n.lookAt(6,4,6,0,0,0,0,1,0);var i=this.gl.getUniformLocation(this.gl._program,"u_transformMatrix");this.rotateCubeUseMouse_bind(n,i)}},{key:"rotateCubeUseMouse_model",value:function(){var t=new Float32Array(c.a.vertex),e=t.length/c.a.unit,n=new Uint8Array(c.a.indices),r=new Float32Array(this.getRandomArray(4*e));this.fillShaderAttribution(t,"a_position",c.a.unit),this.fillShaderAttribution(r,"a_color",4),this.fillElementsIndex(n)}},{key:"rotateCubeUseMouse_bind",value:function(t,e){var n=!1,r={x:0,y:0},i=0,a=0,o=new f.a;this.ele.addEventListener("mousedown",(function(t){var e=t.target.getBoundingClientRect();i=t.clientX-e.x,a=t.clientY-e.y,n=!0})),this.ele.addEventListener("mouseup",(function(){n=!1})),this.ele.addEventListener("mousemove",(function(t){if(n){var e=t.target.getBoundingClientRect(),o=t.clientX-e.x,s=t.clientY-e.y;r.y+=(o-i)/t.target.width*180,r.x+=(s-a)/t.target.height*180,r.y=Math.max(Math.min(r.y,90),-90),i=o,a=s}}));var s=function(){o.set(t),o.rotate(r.x,1,0,0),o.rotate(r.y,0,1,0),this.gl.uniformMatrix4fv(e,!1,o.elements),this.gl.clear(this.gl.DEPTH_BUFFER_BIT|this.gl.COLOR_BUFFER_BIT),this.gl.drawElements(this.gl.TRIANGLES,c.a.indices.length,this.gl.UNSIGNED_BYTE,0),window.requestAnimationFrame(s)}.bind(this);s()}},{key:"fog",value:function(){m.default.call.apply(m.default,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"get_shader_info",value:function(t){var e={rotateCubeUseMouse:{name:"\u9f20\u6807\u63a7\u5236\u6b63\u65b9\u4f53\u65cb\u8f6c",describe:"",source:"<<webgl\u7f16\u7a0b\u6307\u5357>>",time:"2021/10/07"},fog:{name:"\u96fe\u5316\u6548\u679c",describe:"\u2191\u2193:\u589e\u5927/\u51cf\u5c0f \u96fe\u5316\u7684\u8ddd\u79bb",source:"<<webgl\u7f16\u7a0b\u6307\u5357>>",time:"2021/10/31"}};switch(t){case"*":return e;default:return e[t]}}}]),e}(u.a)},174:function(t,e,n){"use strict";n.r(e);var r=n(173);e.default={webglGuide:r.default}},44:function(t,e,n){"use strict";n.r(e);n(177);var r=n(179),i=(n(178),n(180)),a=(n(190),n(25)),o=(n(204),n(201)),s=n(0),l=n.n(s),u=n(168),c=n(8),h=n(18),f=n(17),p=n(19),m=(n(65).a,n(33)),v=n(174);n.d(e,"default",(function(){return y}));var d=o.a.Meta;function y(){var t=function(){for(var t=[],e=0,n=Object.keys(v.default);e<n.length;e++)for(var r=n[e],i=new v.default[r],a=i.get_shader_info("*"),o=0,s=Object.keys(a);o<s.length;o++){var l=s[o];t.push({drawName:l,sourceClass:r,info:a[l],draw:i[l].bind(i)})}return t}(),e=[];return l.a.useEffect((function(){e.forEach((function(t){t.fn(t.ref)}))}),[]),l.a.createElement(r.a,{justify:"center",type:"flex",style:{paddingTop:"32px",height:"100%"}},l.a.createElement(i.a,{xl:{span:16},lg:{span:18},xs:{span:24}},t.map((function(t,n){var r=l.a.createRef();return e.push({fn:t.draw,ref:r}),l.a.createElement(i.a,{xl:{span:6},lg:{span:8},xs:{span:24}},l.a.createElement(o.a,{hoverable:!0,style:{margin:"4px 8px"},cover:l.a.createElement("div",{ref:r,style:{height:"240px"}}),key:t.sourceClass+t.drawName},l.a.createElement(d,{description:l.a.createElement(m.b,{to:"/shader/".concat(t.sourceClass,"/").concat(t.drawName)},"go",l.a.createElement(a.a,{type:"arrow-right"})),title:t.info.name})))}))))}}}]);
//# sourceMappingURL=3.d79eca78.chunk.js.map