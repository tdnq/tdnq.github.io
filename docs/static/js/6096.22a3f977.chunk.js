"use strict";(self.webpackChunktdnq_github_io=self.webpackChunktdnq_github_io||[]).push([[6096,9637,7617,8337],{9637:function(e,t,i){function n(e){var t;null===(t=e.querySelectorAll("canvas"))||void 0===t||t.forEach((function(e){return e.remove()}))}i.d(t,{e:function(){return n}})},6096:function(e,t,i){i.r(t),i.d(t,{default:function(){return v}});var n=i(3433),a=i(5861),s=i(5671),r=i(3144),c=i(7757),o=i.n(c),h=i(3562),d=i(9637),l=i(7617),u=i(8337),p=i(5165),v=function(){function e(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map;(0,s.Z)(this,e),this.leaveCallback=function(){var e;null===(e=t.gui)||void 0===e||e.destroy()},this.render=function(e){e*=.001,t.cameraPole.rotation.y=.1*e,t.pickHelper.pick(t.data.pickerHelperScene,t.camera,t.renderer,t.data.idToObject,e),t.renderer.render(t.scene,t.camera)},this.animate=function(e){t.render(e),t.animationId.set("picker",requestAnimationFrame(t.animate))},this.animationId=i,this.scene=null,this.objects={},this.light=[],this.camera=null,this.renderer=null,this.helper=[],this.cameraPole=new h.Tme,this.data={isHideHelper:"/"===window.location.pathname,idToObject:{},pickerHelperMesh:[]},this.pickHelper=new u.default,this.textureLoader=new h.dpR}return(0,r.Z)(e,[{key:"init",value:function(){var e=(0,a.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.canvasContainer=null===t||void 0===t?void 0:t.current,this.gui=this.data.isHideHelper?null:new p.XS,(0,d.e)(this.canvasContainer),this.initThree(),this.pickHelper.canvas=this.renderer.domElement,this.pickHelper.bindEvent(),this.initCamera(),this.initControl(),e.next=10,this.initObjects();case 10:return this.initLight(),this.initHelper(),e.next=14,this.initScene();case 14:requestAnimationFrame(this.animate);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"initControl",value:function(){}},{key:"initThree",value:function(){this.renderer=new h.CP7,this.renderer.setSize(this.canvasContainer.clientWidth,this.canvasContainer.clientHeight),this.canvasContainer.appendChild(this.renderer.domElement)}},{key:"initScene",value:function(){var e=(0,a.Z)(o().mark((function e(){var t,i,a,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.scene=new h.xsS,this.scene.add(this.cameraPole),this.scene.background=new h.Ilk(16777215),(t=this.scene).add.apply(t,(0,n.Z)(Object.values(this.objects))),this.helper.length&&(i=this.scene).add.apply(i,(0,n.Z)(this.helper)),this.light.length&&(a=this.scene).add.apply(a,(0,n.Z)(this.light)),(s=new h.xsS).background=new h.Ilk(0),s.add.apply(s,(0,n.Z)(this.data.pickerHelperMesh)),this.data.pickerHelperScene=s;case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initHelper",value:function(){this.data.isHideHelper||this.helper.forEach((function(e){e.material&&(e.material.depthTest=!1,e.renderOrder=2),void 0!==e.visible&&(e.visible=!1)}))}},{key:"initObjects",value:function(){var e=(0,a.Z)(o().mark((function e(){var t,i,n,a,s,r,c,d,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=new h.DvJ(.1,.1,.1),i=new h.ZAu,n=this.textureLoader.load(l),a=0;a<100;a++)s=a+1,r=new h.xoR({color:16777215*Math.random(),map:n,transparent:!0,alphaTest:.1,side:h.ehD}),c=new h.Kj0(t,r),this.data.idToObject[s]=c,c.position.set(this.rand(-1,1),this.rand(-1,1),this.rand(-1,1)),c.rotation.set(this.rand(Math.PI),this.rand(Math.PI),this.rand(Math.PI)),c.scale.set(this.rand(1,3),this.rand(1,3),this.rand(1,3)),d=new h.xoR({emissive:new h.Ilk(s),color:new h.Ilk(0,0,0),specular:new h.Ilk(0,0,0),map:n,transparent:!0,side:h.ehD,alphaTest:.5,blending:h.jFi}),(u=new h.Kj0(t,d)).rotation.copy(c.rotation),u.position.copy(c.position),u.scale.copy(c.scale),this.data.pickerHelperMesh.push(u),i.add(c);this.objects.box=i;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"rand",value:function(e,t){return void 0===t&&(t=e,e=0),e+(t-e)*Math.random()}},{key:"initCamera",value:function(){this.camera=new h.cPb(60,this.canvasContainer.clientWidth/this.canvasContainer.clientHeight,1,1e3),this.camera.position.set(1.5,1.5,1.5),this.camera.lookAt(0,0,0),this.cameraPole.add(this.camera)}},{key:"initLight",value:function(){var e=new h.Mig(16777215,.6);this.light.push(e)}}]),e}()},8337:function(e,t,i){i.r(t),i.d(t,{default:function(){return r}});var n=i(5671),a=i(3144),s=i(3562),r=function(){function e(t){var i=this;(0,n.Z)(this,e),this.setPickPosition=function(e){var t=i.getELeRelativePosition(e);i.pickPosition.set(t.x,t.y)},this.clearPickPosition=function(){i.pickPosition.set(-1e5,-1e5)},this.pickingTexture=new s.dd2(1,1),this.pixelBuffer=new Uint8Array(4),this.pickedObject=null,this.pickedObjectSavedColor=0,this.canvas=t,this.pickPosition=new s.FM8(-1e4,1e4)}return(0,a.Z)(e,[{key:"pick",value:function(e,t,i,n,a){var s=this.pickingTexture,r=this.pixelBuffer;this.pickedObject&&(this.pickedObject.material.emissive.setHex(this.pickedObjectSavedColor),this.pickedObject=null);var c=i.getPixelRatio();t.setViewOffset(i.getContext().drawingBufferWidth,i.getContext().drawingBufferHeight,this.pickPosition.x*c|0,this.pickPosition.y*c|0,1,1),i.setRenderTarget(s),i.render(e,t),i.setRenderTarget(null),t.clearViewOffset(),i.readRenderTargetPixels(s,0,0,1,1,r);var o=n[r[0]<<16|r[1]<<8|r[2]];o&&(this.pickedObject=o,this.pickedObjectSavedColor=this.pickedObject.material.emissive.getHex(),this.pickedObject.material.emissive.setHex(8*a%2>1?16776960:16711680))}},{key:"getELeRelativePosition",value:function(e){var t=this.canvas.getBoundingClientRect();return{x:(e.clientX-t.left)*this.canvas.width/t.width,y:(e.clientY-t.top)*this.canvas.height/t.height}}},{key:"bindEvent",value:function(){var e=this;this.canvas.addEventListener("mousemove",this.setPickPosition),this.canvas.addEventListener("mousemout",this.clearPickPosition),this.canvas.addEventListener("mousemleave",this.clearPickPosition),this.canvas.addEventListener("touchstart",(function(t){t.preventDefault(),e.setPickPosition(t.touches[0])}),{passive:!1}),this.canvas.addEventListener("touchmove",(function(t){return e.setPickPosition(t.touches[0])})),this.canvas.addEventListener("touchend",this.clearPickPosition)}}]),e}()},7617:function(e,t,i){e.exports=i.p+"static/media/frame.3fcdb1bf3665d142a73e.png"}}]);