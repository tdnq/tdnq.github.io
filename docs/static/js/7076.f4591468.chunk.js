"use strict";(self.webpackChunktdnq_github_io=self.webpackChunktdnq_github_io||[]).push([[7076,9637,9351],{9637:function(e,t,n){function i(e){var t;null===(t=e.querySelectorAll("canvas"))||void 0===t||t.forEach((function(e){return e.remove()}))}n.d(t,{e:function(){return i}})},7076:function(e,t,n){n.r(t),n.d(t,{default:function(){return v}});var i=n(3433),a=n(5861),r=n(5671),s=n(3144),o=n(7757),c=n.n(o),l=n(3562),h=n(2518),u=n(9637),d=n(9351),p=n(3723),v=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map;(0,r.Z)(this,e),this.leaveCallback=function(){var e;null===(e=t.gui)||void 0===e||e.destroy()},this.render=function(){t.updateLabel(),t.renderer.render(t.scene,t.camera)},this.animate=function(e){t.render(e)},this.animationId=n,this.scene=null,this.objects={},this.light=[],this.camera=null,this.renderer=null,this.helper=[],this.data={isHideHelper:"/"===window.location.pathname},this.info={name:"align-html-elements-to-3d",describe:"\u5bf9\u9f50HTML\u5143\u7d20\u52303D\u5bf9\u8c61",source:"three.js examples",time:"2022/09/24",showPriority:55},this.textureLoader=new l.dpR}return(0,s.Z)(e,[{key:"init",value:function(){var e=(0,a.Z)(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.canvasContainer=null===t||void 0===t?void 0:t.current,this.canvasContainer.style.position="relative",(0,u.e)(this.canvasContainer),this.initThree(),this.initCamera(),this.initControl(),e.next=8,this.initObjects();case 8:return this.initLight(),this.initHelper(),e.next=12,this.initScene();case 12:requestAnimationFrame(this.animate);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"initControl",value:function(){this.control=new h.z(this.camera,this.renderer.domElement),this.control.enableDamping=!0,this.control.enablePan=!1,this.control.minDistance=1.2,this.control.maxDistance=4,this.control.update(),this.control.addEventListener("change",this.render)}},{key:"initThree",value:function(){this.renderer=new l.CP7,this.renderer.setSize(this.canvasContainer.clientWidth,this.canvasContainer.clientHeight),this.canvasContainer.appendChild(this.renderer.domElement)}},{key:"initScene",value:function(){var e=(0,a.Z)(c().mark((function e(){var t,n,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.scene=new l.xsS,this.scene.background=new l.Ilk(566),(t=this.scene).add.apply(t,(0,i.Z)(Object.values(this.objects))),this.helper.length&&(n=this.scene).add.apply(n,(0,i.Z)(this.helper)),this.light.length&&(a=this.scene).add.apply(a,(0,i.Z)(this.light));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initHelper",value:function(){this.data.isHideHelper||this.helper.forEach((function(e){e.material&&(e.material.depthTest=!1,e.renderOrder=2),void 0!==e.visible&&(e.visible=!1)}))}},{key:"initObjects",value:function(){var e=(0,a.Z)(c().mark((function e(){var t,n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new l.xo$(1),e.t0=l.xoR,e.next=4,this.textureLoader.loadAsync(d);case 4:e.t1=e.sent,e.t2={map:e.t1},n=new e.t0(e.t2),this.objects.sphere=new l.Kj0(t,n),this.loadCountryData();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadCountryData",value:function(){var e=p,t=1.5*Math.PI,n=Math.PI,i=new l.Tme,a=new l.Tme;i.add(a);var r=new l.Tme;r.position.setZ(1),a.add(r);var s=this.canvasContainer;e.forEach((function(e){var o=e.lat,c=e.lon,h=e.name,u=e.max,d=e.min;i.rotateY(l.M8C.degToRad(c)+t),a.rotateX(l.M8C.degToRad(o)+n),r.updateWorldMatrix(!0,!1);var p=new l.Pa4;r.getWorldPosition(p),e.position=p;var v=document.createElement("span");v.style.position="absolute",v.style.color="#fff",v.style.left=0,v.style.top=0,v.style.userSelect="none",v.style.pointerEvents="none",v.textContent=h,s.appendChild(v),e.ele=v,e.area=(u[0]-d[0])*(u[1]-d[1])})),this.data.countryData=e}},{key:"updateLabel",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.data.countryData,n=new l.Pa4,i=new l.Pa4,a=new l.Pa4,r=new l.Vkp,s=.2;r.getNormalMatrix(this.camera.matrixWorldInverse),this.camera.getWorldPosition(a),t.forEach((function(t){var a=t.position,o=t.ele;if(t.area<400)o.style.display="none";else if(n.copy(a),n.applyMatrix3(r),i.copy(a),i.applyMatrix4(e.camera.matrixWorldInverse).normalize(),n.dot(i)<s)o.style.display="none";else{o.style.display="",n.copy(a),n.project(e.camera);var c=(.5*n.x+.5)*e.renderer.domElement.clientWidth,l=(-.5*n.y+.5)*e.renderer.domElement.clientHeight;o.style.transform="translate(-50%, -50%) translate(".concat(c,"px, ").concat(l,"px)"),o.style.zIndex=1e5*(.5*-n.z+.5)|0}}))}},{key:"initCamera",value:function(){this.camera=new l.cPb(60,this.canvasContainer.clientWidth/this.canvasContainer.clientHeight,1,1e3),this.camera.position.set(1.5,1.5,1.5),this.camera.lookAt(0,0,0)}},{key:"initLight",value:function(){var e=new l.Mig(16777215,.6);this.light.push(e)}}]),e}()},9351:function(e,t,n){e.exports=n.p+"static/media/country-outlines-4k.2b5fb82f7bcd7eaf525c.png"}}]);