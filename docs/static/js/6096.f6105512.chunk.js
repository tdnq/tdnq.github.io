"use strict";(globalThis.webpackChunktdnq_github_io=globalThis.webpackChunktdnq_github_io||[]).push([[6096,9637,7617,8337],{9637:(e,t,i)=>{function s(e){var t;null===(t=e.querySelectorAll("canvas"))||void 0===t||t.forEach((e=>e.remove()))}i.d(t,{e:()=>s})},6096:(e,t,i)=>{i.r(t),i.d(t,{default:()=>c});var s=i(3562),n=i(9637),a=i(7617),h=i(8337),r=i(5165);class c{constructor(e=new Map){this.leaveCallback=()=>{var e;null===(e=this.gui)||void 0===e||e.destroy()},this.render=e=>{e*=.001,this.cameraPole.rotation.y=.1*e,this.pickHelper.pick(this.data.pickerHelperScene,this.camera,this.renderer,this.data.idToObject,e),this.renderer.render(this.scene,this.camera)},this.animate=e=>{this.render(e),this.animationId.set("picker",requestAnimationFrame(this.animate))},this.animationId=e,this.scene=null,this.objects={},this.light=[],this.camera=null,this.renderer=null,this.helper=[],this.cameraPole=new s.Tme,this.data={isHideHelper:"/"===window.location.pathname,idToObject:{},pickerHelperMesh:[]},this.pickHelper=new h.default,this.textureLoader=new s.dpR}async init(e){this.canvasContainer=null===e||void 0===e?void 0:e.current,this.gui=this.data.isHideHelper?null:new r.XS,(0,n.e)(this.canvasContainer),this.initThree(),this.pickHelper.canvas=this.renderer.domElement,this.pickHelper.bindEvent(),this.initCamera(),this.initControl(),await this.initObjects(),this.initLight(),this.initHelper(),await this.initScene(),requestAnimationFrame(this.animate)}initControl(){}initThree(){this.renderer=new s.CP7,this.renderer.setSize(this.canvasContainer.clientWidth,this.canvasContainer.clientHeight),this.canvasContainer.appendChild(this.renderer.domElement)}async initScene(){this.scene=new s.xsS,this.scene.add(this.cameraPole),this.scene.background=new s.Ilk(16777215),this.scene.add(...Object.values(this.objects)),this.helper.length&&this.scene.add(...this.helper),this.light.length&&this.scene.add(...this.light);{let e=new s.xsS;e.background=new s.Ilk(0),e.add(...this.data.pickerHelperMesh),this.data.pickerHelperScene=e}}initHelper(){this.data.isHideHelper||this.helper.forEach((e=>{e.material&&(e.material.depthTest=!1,e.renderOrder=2),void 0!==e.visible&&(e.visible=!1)}))}async initObjects(){{let e=new s.DvJ(.1,.1,.1),t=new s.ZAu,i=this.textureLoader.load(a);for(let n=0;n<100;n++){let a=n+1,h=new s.xoR({color:16777215*Math.random(),map:i,transparent:!0,alphaTest:.1,side:s.ehD}),r=new s.Kj0(e,h);this.data.idToObject[a]=r,r.position.set(this.rand(-1,1),this.rand(-1,1),this.rand(-1,1)),r.rotation.set(this.rand(Math.PI),this.rand(Math.PI),this.rand(Math.PI)),r.scale.set(this.rand(1,3),this.rand(1,3),this.rand(1,3));const c=new s.xoR({emissive:new s.Ilk(a),color:new s.Ilk(0,0,0),specular:new s.Ilk(0,0,0),map:i,transparent:!0,side:s.ehD,alphaTest:.5,blending:s.jFi});let o=new s.Kj0(e,c);o.rotation.copy(r.rotation),o.position.copy(r.position),o.scale.copy(r.scale),this.data.pickerHelperMesh.push(o),t.add(r)}this.objects.box=t}}rand(e,t){return void 0===t&&(t=e,e=0),e+(t-e)*Math.random()}initCamera(){this.camera=new s.cPb(60,this.canvasContainer.clientWidth/this.canvasContainer.clientHeight,1,1e3),this.camera.position.set(1.5,1.5,1.5),this.camera.lookAt(0,0,0),this.cameraPole.add(this.camera)}initLight(){{let e=new s.Mig(16777215,.6);this.light.push(e)}}}},8337:(e,t,i)=>{i.r(t),i.d(t,{default:()=>n});var s=i(3562);class n{constructor(e){this.setPickPosition=e=>{let t=this.getELeRelativePosition(e);this.pickPosition.set(t.x,t.y)},this.clearPickPosition=()=>{this.pickPosition.set(-1e5,-1e5)},this.pickingTexture=new s.dd2(1,1),this.pixelBuffer=new Uint8Array(4),this.pickedObject=null,this.pickedObjectSavedColor=0,this.canvas=e,this.pickPosition=new s.FM8(-1e4,1e4)}pick(e,t,i,s,n){const{pickingTexture:a,pixelBuffer:h}=this;this.pickedObject&&(this.pickedObject.material.emissive.setHex(this.pickedObjectSavedColor),this.pickedObject=null);const r=i.getPixelRatio();t.setViewOffset(i.getContext().drawingBufferWidth,i.getContext().drawingBufferHeight,this.pickPosition.x*r|0,this.pickPosition.y*r|0,1,1),i.setRenderTarget(a),i.render(e,t),i.setRenderTarget(null),t.clearViewOffset(),i.readRenderTargetPixels(a,0,0,1,1,h);const c=s[h[0]<<16|h[1]<<8|h[2]];c&&(this.pickedObject=c,this.pickedObjectSavedColor=this.pickedObject.material.emissive.getHex(),this.pickedObject.material.emissive.setHex(8*n%2>1?16776960:16711680))}getELeRelativePosition(e){let t=this.canvas.getBoundingClientRect();return{x:(e.clientX-t.left)*this.canvas.width/t.width,y:(e.clientY-t.top)*this.canvas.height/t.height}}bindEvent(){this.canvas.addEventListener("mousemove",this.setPickPosition),this.canvas.addEventListener("mousemout",this.clearPickPosition),this.canvas.addEventListener("mousemleave",this.clearPickPosition),this.canvas.addEventListener("touchstart",(e=>{e.preventDefault(),this.setPickPosition(e.touches[0])}),{passive:!1}),this.canvas.addEventListener("touchmove",(e=>this.setPickPosition(e.touches[0]))),this.canvas.addEventListener("touchend",this.clearPickPosition)}}},7617:(e,t,i)=>{e.exports=i.p+"static/media/frame.3fcdb1bf3665d142a73e.png"}}]);