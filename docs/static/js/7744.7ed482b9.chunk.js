"use strict";(self.webpackChunktdnq_github_io=self.webpackChunktdnq_github_io||[]).push([[7744],{7744:function(e,t,n){n.d(t,{u:function(){return x}});var i=n(3144),r=n(5671),s=n(136),a=n(4062),o=n(3562),u=new o.Pa4,l=new o.Zzh,h=new o.JOQ,c=new o.Pa4,v=new o.CJI,d=function(){function e(){(0,r.Z)(this,e),this.tolerance=-1,this.faces=[],this.newFaces=[],this.assigned=new g,this.unassigned=new g,this.vertices=[]}return(0,i.Z)(e,[{key:"setFromPoints",value:function(e){!0!==Array.isArray(e)&&console.error("THREE.ConvexHull: Points parameter is not an array."),e.length<4&&console.error("THREE.ConvexHull: The algorithm needs at least four points."),this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.vertices.push(new m(e[t]));return this.compute(),this}},{key:"setFromObject",value:function(e){var t=[];return e.updateMatrixWorld(!0),e.traverse((function(e){var n=e.geometry;if(void 0!==n){if(n.isGeometry)return void console.error("THREE.ConvexHull no longer supports Geometry. Use THREE.BufferGeometry instead.");if(n.isBufferGeometry){var i=n.attributes.position;if(void 0!==i)for(var r=0,s=i.count;r<s;r++){var a=new o.Pa4;a.fromBufferAttribute(i,r).applyMatrix4(e.matrixWorld),t.push(a)}}}})),this.setFromPoints(t)}},{key:"containsPoint",value:function(e){for(var t=this.faces,n=0,i=t.length;n<i;n++){if(t[n].distanceToPoint(e)>this.tolerance)return!1}return!0}},{key:"intersectRay",value:function(e,t){for(var n=this.faces,i=-1/0,r=1/0,s=0,a=n.length;s<a;s++){var o=n[s],u=o.distanceToPoint(e.origin),l=o.normal.dot(e.direction);if(u>0&&l>=0)return null;var h=0!==l?-u/l:0;if(!(h<=0)&&(l>0?r=Math.min(h,r):i=Math.max(h,i),i>r))return null}return i!==-1/0?e.at(i,t):e.at(r,t),t}},{key:"intersectsRay",value:function(e){return null!==this.intersectRay(e,u)}},{key:"makeEmpty",value:function(){return this.faces=[],this.vertices=[],this}},{key:"addVertexToFace",value:function(e,t){return e.face=t,null===t.outside?this.assigned.append(e):this.assigned.insertBefore(t.outside,e),t.outside=e,this}},{key:"removeVertexFromFace",value:function(e,t){return e===t.outside&&(null!==e.next&&e.next.face===t?t.outside=e.next:t.outside=null),this.assigned.remove(e),this}},{key:"removeAllVerticesFromFace",value:function(e){if(null!==e.outside){for(var t=e.outside,n=e.outside;null!==n.next&&n.next.face===e;)n=n.next;return this.assigned.removeSubList(t,n),t.prev=n.next=null,e.outside=null,t}}},{key:"deleteFaceVertices",value:function(e,t){var n=this.removeAllVerticesFromFace(e);if(void 0!==n)if(void 0===t)this.unassigned.appendChain(n);else{var i=n;do{var r=i.next;t.distanceToPoint(i.point)>this.tolerance?this.addVertexToFace(i,t):this.unassigned.append(i),i=r}while(null!==i)}return this}},{key:"resolveUnassignedPoints",value:function(e){if(!1===this.unassigned.isEmpty()){var t=this.unassigned.first();do{for(var n=t.next,i=this.tolerance,r=null,s=0;s<e.length;s++){var a=e[s];if(0===a.mark){var o=a.distanceToPoint(t.point);if(o>i&&(i=o,r=a),i>1e3*this.tolerance)break}}null!==r&&this.addVertexToFace(t,r),t=n}while(null!==t)}return this}},{key:"computeExtremes",value:function(){for(var e=new o.Pa4,t=new o.Pa4,n=[],i=[],r=0;r<3;r++)n[r]=i[r]=this.vertices[0];e.copy(this.vertices[0].point),t.copy(this.vertices[0].point);for(var s=0,a=this.vertices.length;s<a;s++){for(var u=this.vertices[s],l=u.point,h=0;h<3;h++)l.getComponent(h)<e.getComponent(h)&&(e.setComponent(h,l.getComponent(h)),n[h]=u);for(var c=0;c<3;c++)l.getComponent(c)>t.getComponent(c)&&(t.setComponent(c,l.getComponent(c)),i[c]=u)}return this.tolerance=3*Number.EPSILON*(Math.max(Math.abs(e.x),Math.abs(t.x))+Math.max(Math.abs(e.y),Math.abs(t.y))+Math.max(Math.abs(e.z),Math.abs(t.z))),{min:n,max:i}}},{key:"computeInitialHull",value:function(){for(var e=this.vertices,t=this.computeExtremes(),n=t.min,i=t.max,r=0,s=0,a=0;a<3;a++){var o=i[a].point.getComponent(a)-n[a].point.getComponent(a);o>r&&(r=o,s=a)}var u,v,d=n[s],p=i[s];r=0,l.set(d.point,p.point);for(var m=0,g=this.vertices.length;m<g;m++){var x=e[m];if(x!==d&&x!==p){l.closestPointToPoint(x.point,!0,c);var y=c.distanceToSquared(x.point);y>r&&(r=y,u=x)}}r=-1,h.setFromCoplanarPoints(d.point,p.point,u.point);for(var k=0,w=this.vertices.length;k<w;k++){var T=e[k];if(T!==d&&T!==p&&T!==u){var E=Math.abs(h.distanceToPoint(T.point));E>r&&(r=E,v=T)}}var F=[];if(h.distanceToPoint(v.point)<0){F.push(f.create(d,p,u),f.create(v,p,d),f.create(v,u,p),f.create(v,d,u));for(var P=0;P<3;P++){var C=(P+1)%3;F[P+1].getEdge(2).setTwin(F[0].getEdge(C)),F[P+1].getEdge(1).setTwin(F[C+1].getEdge(0))}}else{F.push(f.create(d,u,p),f.create(v,d,p),f.create(v,p,u),f.create(v,u,d));for(var b=0;b<3;b++){var H=(b+1)%3;F[b+1].getEdge(2).setTwin(F[0].getEdge((3-b)%3)),F[b+1].getEdge(0).setTwin(F[H+1].getEdge(1))}}for(var M=0;M<4;M++)this.faces.push(F[M]);for(var Z=0,V=e.length;Z<V;Z++){var A=e[Z];if(A!==d&&A!==p&&A!==u&&A!==v){r=this.tolerance;for(var z=null,R=0;R<4;R++){var B=this.faces[R].distanceToPoint(A.point);B>r&&(r=B,z=this.faces[R])}null!==z&&this.addVertexToFace(A,z)}}return this}},{key:"reindexFaces",value:function(){for(var e=[],t=0;t<this.faces.length;t++){var n=this.faces[t];0===n.mark&&e.push(n)}return this.faces=e,this}},{key:"nextVertexToAdd",value:function(){if(!1===this.assigned.isEmpty()){var e,t=0,n=this.assigned.first().face,i=n.outside;do{var r=n.distanceToPoint(i.point);r>t&&(t=r,e=i),i=i.next}while(null!==i&&i.face===n);return e}}},{key:"computeHorizon",value:function(e,t,n,i){var r;this.deleteFaceVertices(n),n.mark=1,r=null===t?t=n.getEdge(0):t.next;do{var s=r.twin,a=s.face;0===a.mark&&(a.distanceToPoint(e)>this.tolerance?this.computeHorizon(e,s,a,i):i.push(r)),r=r.next}while(r!==t);return this}},{key:"addAdjoiningFace",value:function(e,t){var n=f.create(e,t.tail(),t.head());return this.faces.push(n),n.getEdge(-1).setTwin(t.twin),n.getEdge(0)}},{key:"addNewFaces",value:function(e,t){this.newFaces=[];for(var n=null,i=null,r=0;r<t.length;r++){var s=t[r],a=this.addAdjoiningFace(e,s);null===n?n=a:a.next.setTwin(i),this.newFaces.push(a.face),i=a}return n.next.setTwin(i),this}},{key:"addVertexToHull",value:function(e){var t=[];return this.unassigned.clear(),this.removeVertexFromFace(e,e.face),this.computeHorizon(e.point,null,e.face,t),this.addNewFaces(e,t),this.resolveUnassignedPoints(this.newFaces),this}},{key:"cleanup",value:function(){return this.assigned.clear(),this.unassigned.clear(),this.newFaces=[],this}},{key:"compute",value:function(){var e;for(this.computeInitialHull();void 0!==(e=this.nextVertexToAdd());)this.addVertexToHull(e);return this.reindexFaces(),this.cleanup(),this}}]),e}(),f=function(){function e(){(0,r.Z)(this,e),this.normal=new o.Pa4,this.midpoint=new o.Pa4,this.area=0,this.constant=0,this.outside=null,this.mark=0,this.edge=null}return(0,i.Z)(e,[{key:"getEdge",value:function(e){for(var t=this.edge;e>0;)t=t.next,e--;for(;e<0;)t=t.prev,e++;return t}},{key:"compute",value:function(){var e=this.edge.tail(),t=this.edge.head(),n=this.edge.next.head();return v.set(e.point,t.point,n.point),v.getNormal(this.normal),v.getMidpoint(this.midpoint),this.area=v.getArea(),this.constant=this.normal.dot(this.midpoint),this}},{key:"distanceToPoint",value:function(e){return this.normal.dot(e)-this.constant}}],[{key:"create",value:function(t,n,i){var r=new e,s=new p(t,r),a=new p(n,r),o=new p(i,r);return s.next=o.prev=a,a.next=s.prev=o,o.next=a.prev=s,r.edge=s,r.compute()}}]),e}(),p=function(){function e(t,n){(0,r.Z)(this,e),this.vertex=t,this.prev=null,this.next=null,this.twin=null,this.face=n}return(0,i.Z)(e,[{key:"head",value:function(){return this.vertex}},{key:"tail",value:function(){return this.prev?this.prev.vertex:null}},{key:"length",value:function(){var e=this.head(),t=this.tail();return null!==t?t.point.distanceTo(e.point):-1}},{key:"lengthSquared",value:function(){var e=this.head(),t=this.tail();return null!==t?t.point.distanceToSquared(e.point):-1}},{key:"setTwin",value:function(e){return this.twin=e,e.twin=this,this}}]),e}(),m=(0,i.Z)((function e(t){(0,r.Z)(this,e),this.point=t,this.prev=null,this.next=null,this.face=null})),g=function(){function e(){(0,r.Z)(this,e),this.head=null,this.tail=null}return(0,i.Z)(e,[{key:"first",value:function(){return this.head}},{key:"last",value:function(){return this.tail}},{key:"clear",value:function(){return this.head=this.tail=null,this}},{key:"insertBefore",value:function(e,t){return t.prev=e.prev,t.next=e,null===t.prev?this.head=t:t.prev.next=t,e.prev=t,this}},{key:"insertAfter",value:function(e,t){return t.prev=e,t.next=e.next,null===t.next?this.tail=t:t.next.prev=t,e.next=t,this}},{key:"append",value:function(e){return null===this.head?this.head=e:this.tail.next=e,e.prev=this.tail,e.next=null,this.tail=e,this}},{key:"appendChain",value:function(e){for(null===this.head?this.head=e:this.tail.next=e,e.prev=this.tail;null!==e.next;)e=e.next;return this.tail=e,this}},{key:"remove",value:function(e){return null===e.prev?this.head=e.next:e.prev.next=e.next,null===e.next?this.tail=e.prev:e.next.prev=e.prev,this}},{key:"removeSubList",value:function(e,t){return null===e.prev?this.head=t.next:e.prev.next=t.next,null===t.next?this.tail=e.prev:t.next.prev=e.prev,this}},{key:"isEmpty",value:function(){return null===this.head}}]),e}(),x=function(e){(0,s.Z)(n,e);var t=(0,a.Z)(n);function n(e){var i;(0,r.Z)(this,n),i=t.call(this);var s=[],a=[];void 0===d&&console.error("THREE.ConvexBufferGeometry: ConvexBufferGeometry relies on ConvexHull");for(var u=(new d).setFromPoints(e).faces,l=0;l<u.length;l++){var h=u[l],c=h.edge;do{var v=c.head().point;s.push(v.x,v.y,v.z),a.push(h.normal.x,h.normal.y,h.normal.z),c=c.next}while(c!==h.edge)}return i.setAttribute("position",new o.a$l(s,3)),i.setAttribute("normal",new o.a$l(a,3)),i}return(0,i.Z)(n)}(o.u9r)}}]);