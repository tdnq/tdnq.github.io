"use strict";(globalThis.webpackChunktdnq_github_io=globalThis.webpackChunktdnq_github_io||[]).push([[7076,9637,9351],{9637:(e,t,i)=>{function n(e){var t;null===(t=e.querySelectorAll("canvas"))||void 0===t||t.forEach((e=>e.remove()))}i.d(t,{e:()=>n})},7076:(e,t,i)=>{i.r(t),i.d(t,{default:()=>l});var n=i(3562),a=i(2518),s=i(9637),r=i(9351),o=i(3723);class l{constructor(e=new Map){this.leaveCallback=()=>{var e;null===(e=this.gui)||void 0===e||e.destroy()},this.render=()=>{this.updateLabel(),this.renderer.render(this.scene,this.camera)},this.animate=e=>{this.render(e)},this.animationId=e,this.scene=null,this.objects={},this.light=[],this.camera=null,this.renderer=null,this.helper=[],this.data={isHideHelper:"/"===window.location.pathname},this.info={name:"align-html-elements-to-3d",describe:"\u5bf9\u9f50HTML\u5143\u7d20\u52303D\u5bf9\u8c61",source:"three.js examples",time:"2022/09/24",showPriority:55},this.textureLoader=new n.dpR}async init(e){this.canvasContainer=null===e||void 0===e?void 0:e.current,this.canvasContainer.style.position="relative",(0,s.e)(this.canvasContainer),this.initThree(),this.initCamera(),this.initControl(),await this.initObjects(),this.initLight(),this.initHelper(),await this.initScene(),requestAnimationFrame(this.animate)}initControl(){this.control=new a.z(this.camera,this.renderer.domElement),this.control.enableDamping=!0,this.control.enablePan=!1,this.control.minDistance=1.2,this.control.maxDistance=4,this.control.update(),this.control.addEventListener("change",this.render)}initThree(){this.renderer=new n.CP7,this.renderer.setSize(this.canvasContainer.clientWidth,this.canvasContainer.clientHeight),this.canvasContainer.appendChild(this.renderer.domElement)}async initScene(){this.scene=new n.xsS,this.scene.background=new n.Ilk(566),this.scene.add(...Object.values(this.objects)),this.helper.length&&this.scene.add(...this.helper),this.light.length&&this.scene.add(...this.light)}initHelper(){this.data.isHideHelper||this.helper.forEach((e=>{e.material&&(e.material.depthTest=!1,e.renderOrder=2),void 0!==e.visible&&(e.visible=!1)}))}async initObjects(){{let e=new n.xo$(1),t=new n.xoR({map:await this.textureLoader.loadAsync(r)});this.objects.sphere=new n.Kj0(e,t)}this.loadCountryData()}loadCountryData(){let e=o;const t=1.5*Math.PI,i=Math.PI,a=new n.Tme,s=new n.Tme;a.add(s);const r=new n.Tme;r.position.setZ(1),s.add(r);const l=this.canvasContainer;e.forEach((e=>{let{lat:o,lon:h,name:c,max:d,min:p}=e;a.rotateY(n.M8C.degToRad(h)+t),s.rotateX(n.M8C.degToRad(o)+i),r.updateWorldMatrix(!0,!1);let m=new n.Pa4;r.getWorldPosition(m),e.position=m;const u=document.createElement("span");u.style.position="absolute",u.style.color="#fff",u.style.left=0,u.style.top=0,u.style.userSelect="none",u.style.pointerEvents="none",u.textContent=c,l.appendChild(u),e.ele=u,e.area=(d[0]-p[0])*(d[1]-p[1])})),this.data.countryData=e}updateLabel(e=this.data.countryData){let t=new n.Pa4,i=new n.Pa4,a=new n.Pa4,s=new n.Vkp;s.getNormalMatrix(this.camera.matrixWorldInverse),this.camera.getWorldPosition(a),e.forEach((e=>{let{position:n,ele:a,area:r}=e;if(r<400)return void(a.style.display="none");t.copy(n),t.applyMatrix3(s),i.copy(n),i.applyMatrix4(this.camera.matrixWorldInverse).normalize();if(t.dot(i)<.2)return void(a.style.display="none");a.style.display="",t.copy(n),t.project(this.camera);let o=(.5*t.x+.5)*this.renderer.domElement.clientWidth,l=(-.5*t.y+.5)*this.renderer.domElement.clientHeight;a.style.transform=`translate(-50%, -50%) translate(${o}px, ${l}px)`,a.style.zIndex=1e5*(.5*-t.z+.5)|0}))}initCamera(){this.camera=new n.cPb(60,this.canvasContainer.clientWidth/this.canvasContainer.clientHeight,1,1e3),this.camera.position.set(1.5,1.5,1.5),this.camera.lookAt(0,0,0)}initLight(){{let e=new n.Mig(16777215,.6);this.light.push(e)}}}},9351:(e,t,i)=>{e.exports=i.p+"static/media/country-outlines-4k.2b5fb82f7bcd7eaf525c.png"}}]);