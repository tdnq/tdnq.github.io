"use strict";(self.webpackChunktdnq_github_io=self.webpackChunktdnq_github_io||[]).push([[8337],{8337:function(e,t,i){i.r(t),i.d(t,{default:function(){return a}});var s=i(5671),n=i(3144),c=i(3562),a=function(){function e(t){var i=this;(0,s.Z)(this,e),this.setPickPosition=function(e){var t=i.getELeRelativePosition(e);i.pickPosition.set(t.x,t.y)},this.clearPickPosition=function(){i.pickPosition.set(-1e5,-1e5)},this.pickingTexture=new c.dd2(1,1),this.pixelBuffer=new Uint8Array(4),this.pickedObject=null,this.pickedObjectSavedColor=0,this.canvas=t,this.pickPosition=new c.FM8(-1e4,1e4)}return(0,n.Z)(e,[{key:"pick",value:function(e,t,i,s,n){var c=this.pickingTexture,a=this.pixelBuffer;this.pickedObject&&(this.pickedObject.material.emissive.setHex(this.pickedObjectSavedColor),this.pickedObject=null);var o=i.getPixelRatio();t.setViewOffset(i.getContext().drawingBufferWidth,i.getContext().drawingBufferHeight,this.pickPosition.x*o|0,this.pickPosition.y*o|0,1,1),i.setRenderTarget(c),i.render(e,t),i.setRenderTarget(null),t.clearViewOffset(),i.readRenderTargetPixels(c,0,0,1,1,a);var r=s[a[0]<<16|a[1]<<8|a[2]];r&&(this.pickedObject=r,this.pickedObjectSavedColor=this.pickedObject.material.emissive.getHex(),this.pickedObject.material.emissive.setHex(8*n%2>1?16776960:16711680))}},{key:"getELeRelativePosition",value:function(e){var t=this.canvas.getBoundingClientRect();return{x:(e.clientX-t.left)*this.canvas.width/t.width,y:(e.clientY-t.top)*this.canvas.height/t.height}}},{key:"bindEvent",value:function(){var e=this;this.canvas.addEventListener("mousemove",this.setPickPosition),this.canvas.addEventListener("mousemout",this.clearPickPosition),this.canvas.addEventListener("mousemleave",this.clearPickPosition),this.canvas.addEventListener("touchstart",(function(t){t.preventDefault(),e.setPickPosition(t.touches[0])}),{passive:!1}),this.canvas.addEventListener("touchmove",(function(t){return e.setPickPosition(t.touches[0])})),this.canvas.addEventListener("touchend",this.clearPickPosition)}}]),e}()}}]);