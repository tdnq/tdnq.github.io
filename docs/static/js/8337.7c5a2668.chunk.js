"use strict";(globalThis.webpackChunktdnq_github_io=globalThis.webpackChunktdnq_github_io||[]).push([[8337],{8337:(e,t,i)=>{i.r(t),i.d(t,{default:()=>n});var s=i(3562);class n{constructor(e){this.setPickPosition=e=>{let t=this.getELeRelativePosition(e);this.pickPosition.set(t.x,t.y)},this.clearPickPosition=()=>{this.pickPosition.set(-1e5,-1e5)},this.pickingTexture=new s.dd2(1,1),this.pixelBuffer=new Uint8Array(4),this.pickedObject=null,this.pickedObjectSavedColor=0,this.canvas=e,this.pickPosition=new s.FM8(-1e4,1e4)}pick(e,t,i,s,n){const{pickingTexture:c,pixelBuffer:a}=this;this.pickedObject&&(this.pickedObject.material.emissive.setHex(this.pickedObjectSavedColor),this.pickedObject=null);const o=i.getPixelRatio();t.setViewOffset(i.getContext().drawingBufferWidth,i.getContext().drawingBufferHeight,this.pickPosition.x*o|0,this.pickPosition.y*o|0,1,1),i.setRenderTarget(c),i.render(e,t),i.setRenderTarget(null),t.clearViewOffset(),i.readRenderTargetPixels(c,0,0,1,1,a);const h=s[a[0]<<16|a[1]<<8|a[2]];h&&(this.pickedObject=h,this.pickedObjectSavedColor=this.pickedObject.material.emissive.getHex(),this.pickedObject.material.emissive.setHex(8*n%2>1?16776960:16711680))}getELeRelativePosition(e){let t=this.canvas.getBoundingClientRect();return{x:(e.clientX-t.left)*this.canvas.width/t.width,y:(e.clientY-t.top)*this.canvas.height/t.height}}bindEvent(){this.canvas.addEventListener("mousemove",this.setPickPosition),this.canvas.addEventListener("mousemout",this.clearPickPosition),this.canvas.addEventListener("mousemleave",this.clearPickPosition),this.canvas.addEventListener("touchstart",(e=>{e.preventDefault(),this.setPickPosition(e.touches[0])}),{passive:!1}),this.canvas.addEventListener("touchmove",(e=>this.setPickPosition(e.touches[0]))),this.canvas.addEventListener("touchend",this.clearPickPosition)}}}}]);